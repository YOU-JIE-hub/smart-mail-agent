==== REPO INVENTORY ====
Repo : /home/youjie/projects/smart-mail-agent
Branch: showcase/portfolio-clean-20250816-054936

== Git status ==
?? data/
?? repo-inventory-20250816-084630.txt

== Top-level (ls -la) ==
total 84
drwxr-xr-x 15 youjie youjie 4096 Aug 16 08:46 .
drwxr-xr-x  6 youjie youjie 4096 Aug 16 05:54 ..
drwxr-xr-x  7 youjie youjie 4096 Aug 16 05:49 .archive
drwxr-xr-x  8 youjie youjie 4096 Aug 16 08:46 .git
-rw-r--r--  1 youjie youjie   33 Aug 16 05:54 .gitattributes
drwxr-xr-x  5 youjie youjie 4096 Aug 15 22:54 .github
-rw-r--r--  1 youjie youjie  148 Aug 16 05:54 .gitignore
drwxr-xr-x  9 youjie youjie 4096 Aug 16 05:49 .portfolio_hidden
drwxr-xr-x  3 youjie youjie 4096 Aug 15 05:33 .pytest_cache
drwxr-xr-x  3 youjie youjie 4096 Aug 15 05:33 .ruff_cache
drwxr-xr-x  7 youjie youjie 4096 Aug 15 05:00 .venv
-rw-r--r--  1 youjie youjie 1064 Aug 15 02:53 LICENSE
-rw-r--r--  1 youjie youjie 2654 Aug 16 05:54 README.md
drwxr-xr-x  3 youjie youjie 4096 Aug 16 02:04 configs
drwxr-xr-x  4 youjie youjie 4096 Aug 16 07:59 data
-rw-r--r--  1 youjie youjie 1181 Aug 16 05:49 pyproject.toml
-rw-r--r--  1 youjie youjie  211 Aug 16 08:46 repo-inventory-20250816-084630.txt
drwxr-xr-x  3 youjie youjie 4096 Aug 16 03:24 scripts
drwxr-xr-x 11 youjie youjie 4096 Aug 16 05:49 src
drwxr-xr-x  6 youjie youjie 4096 Aug 16 07:59 tests
drwxr-xr-x  2 youjie youjie 4096 Aug 16 05:49 tools

== Top-level dirs with sizes (du -h -d1) ==
8.0K	./tools
20K	./configs
20K	./scripts
36K	./.pytest_cache
68K	./.github
84K	./data
104K	./.archive
104K	./.ruff_cache
360K	./tests
456K	./.portfolio_hidden
644K	./src
7.4G	./.venv
13G	./.git
21G	.

== Full tree (filtered heavy internals) ==
.
├── .archive
│   ├── README.md.bak
│   ├── cli
│   │   ├── run_classifier.py
│   │   ├── run_generate_spam_testcases.py
│   │   ├── run_llm_filter.py
│   │   ├── run_main.py
│   │   ├── run_orchestrator.py
│   │   ├── run_rule_filter.py
│   │   ├── run_spam_classifier.py
│   │   └── run_spam_filter.py
│   ├── pipeline
│   │   ├── main.py
│   │   └── main1.py
│   ├── pyproject.toml.bak
│   ├── requirements
│   │   ├── requirements-dev.txt
│   │   └── requirements.txt
│   ├── spam
│   │   ├── __init__.py
│   │   └── spam_filter_orchestrator.py
│   └── src
│       └── cli
├── .gitattributes
├── .github
│   ├── ISSUE_TEMPLATE
│   │   └── bug_report.md
│   ├── PULL_REQUEST_TEMPLATE.md
│   ├── dependabot.yml
│   ├── workflows
│   │   └── tests.yml
│   └── workflows-archive
│       ├── ci-offline.yml
│       ├── ci.yaml
│       ├── docker-ghcr.yml
│       ├── interview-addon.yml
│       ├── interview.yml
│       ├── nightly.yml
│       ├── offline-ci.yml
│       ├── release.yml
│       └── security.yml
├── .gitignore
├── .portfolio_hidden
│   ├── .archive
│   │   └── spam
│   ├── .dev
│   │   ├── __init__.py
│   │   ├── apply_classifier_fallback_fix_v1.py
│   │   ├── apply_docker_ci_v1.py
│   │   ├── apply_fix_log_writer_v1.py
│   │   ├── apply_fix_round9.py
│   │   ├── apply_imap_debug_v2.py
│   │   ├── apply_mailer_online_tests_v1.py
│   │   ├── bootstrap_gh_ci.sh
│   │   ├── check_env.py
│   │   ├── ci.mk
│   │   ├── cleanup_repo.py
│   │   ├── db_migrate_emails_log.py
│   │   ├── dedup_cleanup.sh
│   │   ├── dedupe_requirements.py
│   │   ├── dev_runner.py
│   │   ├── finalize_and_push.sh
│   │   ├── fix_from_pretrained_order.py
│   │   ├── fix_from_pretrained_order_v2.py
│   │   ├── fix_from_pretrained_order_v3.py
│   │   ├── generate_offline_report.py
│   │   ├── generate_spam_report.py
│   │   ├── gh_device_login.sh
│   │   ├── git_setup_and_tag.py
│   │   ├── imap_pass_sanitize.py
│   │   ├── make_share_bundle.sh
│   │   ├── metrics_daily.py
│   │   ├── offline_verify.py
│   │   ├── one_paste_ship.py
│   │   ├── one_shot_patch_and_run.sh
│   │   ├── project_catalog.py
│   │   ├── push_secrets_from_env.sh
│   │   ├── repo_tidy.py
│   │   ├── run_actions_matrix.py
│   │   ├── run_spam_demo.py
│   │   ├── set_imap_pass.py
│   │   ├── set_smtp_pass.py
│   │   ├── show_summary.sh
│   │   └── verify_pdf_degrade.py
│   ├── .dockerignore
│   ├── .editorconfig
│   ├── .env.example
│   ├── .envrc
│   ├── .flake8
│   ├── .gitattributes
│   ├── .github
│   │   └── workflows
│   ├── .gitignore
│   ├── .pre-commit-config.yaml
│   ├── .pre-commit-config.yaml.bak.before-black-removal
│   ├── CHANGELOG.md
│   ├── CODE_OF_CONDUCT.md
│   ├── CONTRIBUTING.md
│   ├── Dockerfile
│   ├── MANIFEST.in
│   ├── Makefile
│   ├── SECURITY.md
│   ├── assets
│   │   └── fonts
│   ├── bootstrap_project.py
│   ├── data
│   │   ├── db
│   │   └── output
│   ├── docs
│   │   ├── architecture.md
│   │   ├── cli.md
│   │   ├── index.md
│   │   └── usage.md
│   ├── mkdocs.yml
│   ├── pyproject.toml.bak.pre-fix-20250816-003526
│   ├── pytest.ini
│   └── templates
│       ├── complaint_high.j2
│       ├── complaint_low.j2
│       ├── complaint_med.j2
│       ├── needs_summary.md.j2
│       └── sales_inquiry_reply.j2
├── LICENSE
├── README.md
├── configs
│   ├── default.yml
│   └── samples
│       ├── policy.yaml
│       └── spam_rules.yaml
├── data
│   ├── db
│   └── output
│       ├── attachment_20250816_055419.pdf
│       ├── attachment_20250816_060051.pdf
│       ├── attachment_20250816_060526.pdf
│       ├── attachment_20250816_060547.pdf
│       ├── attachment_20250816_074320.pdf
│       ├── attachment_20250816_074748.pdf
│       ├── attachment_20250816_075051.pdf
│       ├── attachment_20250816_075908.pdf
│       ├── matrix
│       ├── quote-基礎-20250816-055419.pdf
│       ├── quote-基礎-20250816-060051.pdf
│       ├── quote-基礎-20250816-060526.pdf
│       ├── quote-基礎-20250816-060548.pdf
│       ├── quote-基礎-20250816-074320.pdf
│       ├── quote-基礎-20250816-074748.pdf
│       ├── quote-基礎-20250816-075051.pdf
│       └── quote-基礎-20250816-075908.pdf
├── pyproject.toml
├── repo-inventory-20250816-084630.txt
├── scripts
│   ├── bin
│   │   └── smarun
│   ├── run_pipeline.sh
│   └── setup_env.sh
├── src
│   ├── __init__.py
│   ├── action_handler.py
│   ├── actions
│   │   └── __init__.py
│   ├── classifier.py
│   ├── email_processor.py
│   ├── inference_classifier.py
│   ├── init_db.py
│   ├── log_writer.py
│   ├── modules
│   │   ├── __init__.py
│   │   ├── apply_diff.py
│   │   ├── leads_logger.py
│   │   ├── quotation.py
│   │   ├── quote_logger.py
│   │   └── sales_notifier.py
│   ├── observability
│   │   └── tracing.py
│   ├── patches
│   │   ├── __init__.py
│   │   ├── handle_router_patch.py
│   │   └── handle_safe_patch.py
│   ├── policy_engine.py
│   ├── requirements.txt
│   ├── run_action_handler.py
│   ├── run_action_handler.py.bak.20250813-070746
│   ├── run_action_handler.py.bak.20250813-081617
│   ├── run_action_handler.py.bak.20250813-082258
│   ├── run_action_handler.py.bak.20250813-083058
│   ├── run_action_handler.py.bak.20250813-083230
│   ├── send_with_attachment.py
│   ├── sitecustomize.py
│   ├── sma_types.py
│   ├── smart_mail_agent
│   │   ├── __init__.py
│   │   ├── __main__.py
│   │   ├── __version__.py
│   │   ├── actions
│   │   ├── cli
│   │   ├── cli_spamcheck.py
│   │   ├── policy_engine.py
│   │   ├── sma_types.py
│   │   ├── spam
│   │   └── utils
│   ├── spam
│   │   ├── __init__.py
│   │   ├── feature_extractor.py
│   │   ├── ml_spam_classifier.py
│   │   ├── pipeline.py
│   │   ├── rule_filter.py
│   │   ├── rules.py
│   │   └── spam_filter_orchestrator.py
│   ├── stats_collector.py
│   ├── support_ticket.py
│   ├── train_classifier.py
│   ├── trainers
│   │   └── train_bert_spam_classifier.py
│   └── utils
│       ├── .keep
│       ├── __init__.py
│       ├── jsonlog.py
│       ├── logger.py
│       └── mailer.py
├── tests
│   ├── .keep
│   ├── conftest.py
│   ├── contracts
│   │   ├── conftest.py
│   │   └── test_action_result_contracts.py
│   ├── e2e
│   │   ├── conftest.py
│   │   ├── test_actions_matrix_ext.py
│   │   ├── test_cli_flags.py
│   │   ├── test_cli_scripts.py
│   │   ├── test_cli_scripts.py.bak.20250813-081617
│   │   ├── test_complaint_policy.py
│   │   ├── test_label_routing_offline.py
│   │   ├── test_label_routing_offline.py.bak.20250813-081617
│   │   ├── test_new_intents.py
│   │   ├── test_offline_suite.py
│   │   ├── test_policy_expansion.py
│   │   ├── test_runner.py
│   │   ├── test_sales_and_complaint.py
│   │   ├── test_sales_inquiry_needs_summary.py
│   │   ├── test_send_quote_degrade.py
│   │   └── test_spam_pipeline.py
│   ├── test_action_handler.py
│   ├── test_apply_diff.py
│   ├── test_classifier.py
│   ├── test_init_db.py
│   ├── test_init_emails_log_db.py
│   ├── test_init_processed_mails_db.py
│   ├── test_init_tickets_db.py
│   ├── test_mailer.py
│   ├── test_mailer_online.py
│   ├── test_quotation.py
│   ├── test_quote_logger.py
│   ├── test_sales_notifier.py
│   ├── test_send_with_attachment.py
│   ├── test_spam_filter.py
│   ├── test_stats_collector.py
│   └── unit
│       ├── test_contracts.py
│       ├── test_policy_engine.py
│       ├── test_policy_minimal.py
│       ├── test_spam_stack.py
│       ├── test_spam_stack.py.bak.20250813-081730
│       ├── test_tasks_minimal.py
│       └── test_tasks_minimal.py.bak.20250813-081730
└── tools
    └── run_actions_matrix.py

50 directories, 218 files

== src (depth=2) ==
src
├── __init__.py
├── action_handler.py
├── actions
│   └── __init__.py
├── classifier.py
├── email_processor.py
├── inference_classifier.py
├── init_db.py
├── log_writer.py
├── modules
│   ├── __init__.py
│   ├── apply_diff.py
│   ├── leads_logger.py
│   ├── quotation.py
│   ├── quote_logger.py
│   └── sales_notifier.py
├── observability
│   └── tracing.py
├── patches
│   ├── __init__.py
│   ├── handle_router_patch.py
│   └── handle_safe_patch.py
├── policy_engine.py
├── requirements.txt
├── run_action_handler.py
├── run_action_handler.py.bak.20250813-070746
├── run_action_handler.py.bak.20250813-081617
├── run_action_handler.py.bak.20250813-082258
├── run_action_handler.py.bak.20250813-083058
├── run_action_handler.py.bak.20250813-083230
├── send_with_attachment.py
├── sitecustomize.py
├── sma_types.py
├── smart_mail_agent
│   ├── __init__.py
│   ├── __main__.py
│   ├── __version__.py
│   ├── actions
│   ├── cli
│   ├── cli_spamcheck.py
│   ├── policy_engine.py
│   ├── sma_types.py
│   ├── spam
│   └── utils
├── spam
│   ├── __init__.py
│   ├── feature_extractor.py
│   ├── ml_spam_classifier.py
│   ├── pipeline.py
│   ├── rule_filter.py
│   ├── rules.py
│   └── spam_filter_orchestrator.py
├── stats_collector.py
├── support_ticket.py
├── train_classifier.py
├── trainers
│   └── train_bert_spam_classifier.py
└── utils
    ├── .keep
    ├── __init__.py
    ├── jsonlog.py
    ├── logger.py
    └── mailer.py

12 directories, 51 files

== tests (depth=2) ==
tests
├── .keep
├── conftest.py
├── contracts
│   ├── conftest.py
│   └── test_action_result_contracts.py
├── e2e
│   ├── conftest.py
│   ├── test_actions_matrix_ext.py
│   ├── test_cli_flags.py
│   ├── test_cli_scripts.py
│   ├── test_cli_scripts.py.bak.20250813-081617
│   ├── test_complaint_policy.py
│   ├── test_label_routing_offline.py
│   ├── test_label_routing_offline.py.bak.20250813-081617
│   ├── test_new_intents.py
│   ├── test_offline_suite.py
│   ├── test_policy_expansion.py
│   ├── test_runner.py
│   ├── test_sales_and_complaint.py
│   ├── test_sales_inquiry_needs_summary.py
│   ├── test_send_quote_degrade.py
│   └── test_spam_pipeline.py
├── test_action_handler.py
├── test_apply_diff.py
├── test_classifier.py
├── test_init_db.py
├── test_init_emails_log_db.py
├── test_init_processed_mails_db.py
├── test_init_tickets_db.py
├── test_mailer.py
├── test_mailer_online.py
├── test_quotation.py
├── test_quote_logger.py
├── test_sales_notifier.py
├── test_send_with_attachment.py
├── test_spam_filter.py
├── test_stats_collector.py
└── unit
    ├── test_contracts.py
    ├── test_policy_engine.py
    ├── test_policy_minimal.py
    ├── test_spam_stack.py
    ├── test_spam_stack.py.bak.20250813-081730
    ├── test_tasks_minimal.py
    └── test_tasks_minimal.py.bak.20250813-081730

3 directories, 42 files

== tools (depth=2) ==
tools
└── run_actions_matrix.py

0 directories, 1 file

== configs (depth=2) ==
configs
├── default.yml
└── samples
    ├── policy.yaml
    └── spam_rules.yaml

1 directory, 3 files

== data (depth=2) ==
data
├── db
└── output
    ├── attachment_20250816_055419.pdf
    ├── attachment_20250816_060051.pdf
    ├── attachment_20250816_060526.pdf
    ├── attachment_20250816_060547.pdf
    ├── attachment_20250816_074320.pdf
    ├── attachment_20250816_074748.pdf
    ├── attachment_20250816_075051.pdf
    ├── attachment_20250816_075908.pdf
    ├── matrix
    ├── quote-基礎-20250816-055419.pdf
    ├── quote-基礎-20250816-060051.pdf
    ├── quote-基礎-20250816-060526.pdf
    ├── quote-基礎-20250816-060548.pdf
    ├── quote-基礎-20250816-074320.pdf
    ├── quote-基礎-20250816-074748.pdf
    ├── quote-基礎-20250816-075051.pdf
    └── quote-基礎-20250816-075908.pdf

3 directories, 16 files

== .portfolio_hidden (depth=2) ==
.portfolio_hidden
├── .archive
│   └── spam
├── .dev
│   ├── __init__.py
│   ├── apply_classifier_fallback_fix_v1.py
│   ├── apply_docker_ci_v1.py
│   ├── apply_fix_log_writer_v1.py
│   ├── apply_fix_round9.py
│   ├── apply_imap_debug_v2.py
│   ├── apply_mailer_online_tests_v1.py
│   ├── bootstrap_gh_ci.sh
│   ├── check_env.py
│   ├── ci.mk
│   ├── cleanup_repo.py
│   ├── db_migrate_emails_log.py
│   ├── dedup_cleanup.sh
│   ├── dedupe_requirements.py
│   ├── dev_runner.py
│   ├── finalize_and_push.sh
│   ├── fix_from_pretrained_order.py
│   ├── fix_from_pretrained_order_v2.py
│   ├── fix_from_pretrained_order_v3.py
│   ├── generate_offline_report.py
│   ├── generate_spam_report.py
│   ├── gh_device_login.sh
│   ├── git_setup_and_tag.py
│   ├── imap_pass_sanitize.py
│   ├── make_share_bundle.sh
│   ├── metrics_daily.py
│   ├── offline_verify.py
│   ├── one_paste_ship.py
│   ├── one_shot_patch_and_run.sh
│   ├── project_catalog.py
│   ├── push_secrets_from_env.sh
│   ├── repo_tidy.py
│   ├── run_actions_matrix.py
│   ├── run_spam_demo.py
│   ├── set_imap_pass.py
│   ├── set_smtp_pass.py
│   ├── show_summary.sh
│   └── verify_pdf_degrade.py
├── .dockerignore
├── .editorconfig
├── .env.example
├── .envrc
├── .flake8
├── .gitattributes
├── .github
│   └── workflows
├── .gitignore
├── .pre-commit-config.yaml
├── .pre-commit-config.yaml.bak.before-black-removal
├── CHANGELOG.md
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── Dockerfile
├── MANIFEST.in
├── Makefile
├── SECURITY.md
├── assets
│   └── fonts
├── bootstrap_project.py
├── data
│   ├── db
│   └── output
├── docs
│   ├── architecture.md
│   ├── cli.md
│   ├── index.md
│   └── usage.md
├── mkdocs.yml
├── pyproject.toml.bak.pre-fix-20250816-003526
├── pytest.ini
└── templates
    ├── complaint_high.j2
    ├── complaint_low.j2
    ├── complaint_med.j2
    ├── needs_summary.md.j2
    └── sales_inquiry_reply.j2

12 directories, 67 files

== Large files > 10MB (working tree) ==
11M	./.venv/lib/python3.10/site-packages/pyarrow/libparquet.so.2100
12M	./.venv/lib/python3.10/site-packages/pydeck/nbextension/static/index.js.map
12M	./.venv/lib/python3.10/site-packages/triton/_C/libproton.so
12M	./.venv/share/jupyter/nbextensions/pydeck/index.js.map
19M	./.venv/lib/python3.10/site-packages/pyarrow/libarrow_compute.so.2100
20M	./.venv/lib/python3.10/site-packages/pyarrow/libarrow_flight.so.2100
22M	./.venv/lib/python3.10/site-packages/scipy.libs/libscipy_openblas-68440149.so
23M	./.venv/lib/python3.10/site-packages/nvidia/cudnn/lib/libcudnn_engines_runtime_compiled.so.9
25M	./.venv/lib/python3.10/site-packages/nvidia/cuda_cupti/lib/libnvperf_host.so
25M	./.venv/lib/python3.10/site-packages/triton/backends/nvidia/lib/cupti/libnvperf_host.so
27M	./.venv/lib/python3.10/site-packages/torch/lib/libtorch_python.so
31M	./.venv/lib/python3.10/site-packages/triton/backends/nvidia/bin/ptxas
32M	./.venv/lib/python3.10/site-packages/triton/backends/nvidia/lib/cupti/libnvperf_host_static.a
34M	./.venv/bin/ruff
34M	./.venv/lib/python3.10/site-packages/numpy.libs/libopenblas64_p-r0-0cf96a72.3.23.dev.so
42M	./.venv/lib/python3.10/site-packages/triton/backends/nvidia/lib/cupti/libcupti_static.a
47M	./.venv/lib/python3.10/site-packages/pyarrow/libarrow.so.2100
57M	./.venv/lib/python3.10/site-packages/nvidia/cudnn/lib/libcudnn_heuristic.so.9
90M	./.venv/lib/python3.10/site-packages/nvidia/nvjitlink/lib/libnvJitLink.so.12
100M	./.venv/lib/python3.10/site-packages/nvidia/cuda_nvrtc/lib/libnvrtc.so.12
101M	./.venv/lib/python3.10/site-packages/nvidia/cuda_nvrtc/lib/libnvrtc.alt.so.12
112M	./.venv/lib/python3.10/site-packages/nvidia/cublas/lib/libcublas.so.12
122M	./.venv/lib/python3.10/site-packages/torch/lib/libtorch_cuda_linalg.so
123M	./.venv/lib/python3.10/site-packages/nvidia/cudnn/lib/libcudnn_ops.so.9
131M	./.venv/lib/python3.10/site-packages/nvidia/curand/lib/libcurand.so.10
155M	./.venv/lib/python3.10/site-packages/nvidia/cusolver/lib/libcusolverMg.so.11
233M	./.venv/lib/python3.10/site-packages/nvidia/cusolver/lib/libcusolver.so.11
267M	./.venv/lib/python3.10/site-packages/nvidia/cufft/lib/libcufft.so.11
273M	./.venv/lib/python3.10/site-packages/nvidia/cudnn/lib/libcudnn_adv.so.9
337M	./.venv/lib/python3.10/site-packages/triton/_C/libtriton.so
371M	./.venv/lib/python3.10/site-packages/nvidia/cusparse/lib/libcusparse.so.12
410M	./.venv/lib/python3.10/site-packages/nvidia/nccl/lib/libnccl.so.2
411M	./.venv/lib/python3.10/site-packages/torch/lib/libtorch_cpu.so
432M	./.venv/lib/python3.10/site-packages/nvidia/cusparselt/lib/libcusparseLt.so.0
523M	./.venv/lib/python3.10/site-packages/nvidia/cudnn/lib/libcudnn_engines_precompiled.so.9
717M	./.venv/lib/python3.10/site-packages/nvidia/cublas/lib/libcublasLt.so.12
969M	./.venv/lib/python3.10/site-packages/torch/lib/libtorch_cuda.so

== Tracked __pycache__ (should be none) ==

== Backup/duplicate-like files (src only) ==

== Both-root-and-package duplicates (names only) ==
DUP: src/policy_engine.py  AND  src/smart_mail_agent/policy_engine.py
DUP: src/sma_types.py  AND  src/smart_mail_agent/sma_types.py
