# Clean Tree (core-first view)

.github
LICENSE
README.md
assets
configs
data
init_db.py
modules
pyproject.toml
scripts
src
tests

# All files (filtered)
.coverage
.editorconfig
.env.example
.env.smtp.example
.gitattributes
.github/CODEOWNERS
.github/ISSUE_TEMPLATE/bug_report.md
.github/ISSUE_TEMPLATE/bug_report.yml
.github/ISSUE_TEMPLATE/feature_request.md
.github/ISSUE_TEMPLATE/feature_request.yml
.github/PULL_REQUEST_TEMPLATE/pull_request_template.md
.github/dependabot.yml
.github/release-drafter.yml
.github/workflows/ci.yml
.github/workflows/codeql.yml
.github/workflows/lint.yml
.github/workflows/release-drafter.yml
.github/workflows/smtp_integration.yml
.github/workflows/tests.yml
.github/workflows/typecheck.yml
.gitignore
.local-logs/test_action_result_contracts.py.log
.local-logs/test_actions_matrix_ext.py.log
.pre-commit-config.yaml
.pre-commit-config.yaml.bak.20250818T032817
.review_cursor
.ruff.toml
.ruff.toml.bak.20250818T105514
.ruffignore
CONTRIBUTING.md
LICENSE
Makefile
README.md
SECURITY.md
assert
badges/coverage.svg
bin/fmt
bin/lint
bin/run_ai_rpa
bin/sma
bin/sma-housekeeping
bin/smarun
configs/ai_rpa_config.yaml
configs/default.yml
configs/samples/policy.yaml
configs/samples/spam_rules.yaml
coverage.xml
data/complaints/log.csv
data/leads/leads.csv
data/output/.gitkeep
data/output/attachment_20250819_000030.pdf
data/output/attachment_20250819_000033.txt
data/output/attachment_20250819_000034.pdf
data/output/attachment_20250819_003243.pdf
data/output/attachment_20250819_003245.txt
data/output/attachment_20250819_003246.pdf
data/output/attachment_20250819_143846.pdf
data/output/attachment_20250819_143848.txt
data/output/attachment_20250819_215631.pdf
data/output/attachment_20250819_215632.txt
data/output/attachment_20250819_223113.pdf
data/output/attachment_20250819_223424.txt
data/output/attachment_20250819_234014.pdf
data/output/attachment_20250819_234016.txt
data/output/attachment_20250820_001041.pdf
data/output/attachment_20250820_001042.txt
data/output/attachment_20250820_001046.pdf
data/output/attachment_20250820_001047.txt
data/output/attachment_20250820_001325.pdf
data/output/attachment_20250820_001326.txt
data/output/attachment_20250820_011503.pdf
data/output/attachment_20250820_011503.txt
data/output/attachment_20250820_143917.pdf
data/output/attachment_20250820_143917.txt
data/output/attachment_20250820_143928.pdf
data/output/attachment_20250820_143929.txt
data/output/attachment_20250820_143930.pdf
data/output/attachment_20250820_143930.txt
data/output/attachment_20250820_144643.pdf
data/output/attachment_20250820_144644.txt
data/output/attachment_20250820_144645.pdf
data/output/attachment_20250820_144647.txt
data/output/attachment_20250820_145345.pdf
data/output/attachment_20250820_145346.txt
data/output/attachment_20250820_145852.pdf
data/output/attachment_20250820_150500.pdf
data/output/attachment_20250820_150753.txt
data/output/attachment_20250820_164412.pdf
data/output/attachment_20250821_013231.pdf
data/output/attachment_20250821_013955.pdf
data/output/attachment_20250821_014354.pdf
data/output/attachment_20250821_020412.pdf
data/output/attachment_20250821_022115.pdf
data/output/attachment_20250821_024408.pdf
data/output/attachment_20250821_032921.pdf
data/output/attachment_20250821_035001.pdf
data/output/attachment_20250821_041640.pdf
data/output/attachment_20250821_041940.pdf
data/output/attachment_20250821_041954.pdf
data/output/attachment_20250821_042646.pdf
data/output/attachment_20250821_043827.pdf
data/output/attachment_20250821_052841.pdf
data/output/attachment_20250821_053346.pdf
data/output/attachment_20250821_053555.pdf
data/output/attachment_20250821_054248.pdf
data/output/attachment_20250821_065849.pdf
data/output/attachment_20250821_070119.pdf
data/output/attachment_20250821_070327.pdf
data/output/attachment_20250821_070550.pdf
data/output/attachment_20250821_070719.pdf
data/output/attachment_20250821_071104.pdf
data/output/attachment_20250821_071336.pdf
data/output/attachment_20250821_071507.pdf
data/output/attachment_20250821_071711.pdf
data/output/attachment_20250821_071921.pdf
data/output/attachment_20250821_072155.pdf
data/output/attachment_20250821_073145.pdf
data/output/attachment_20250821_073535.pdf
data/output/attachment_20250821_081127.pdf
data/output/attachment_20250821_084439.pdf
data/output/attachment_20250821_095645.pdf
data/output/in_c.json
data/output/in_overlimit.json
data/output/in_sales.json
data/output/in_whitelist.json
data/output/matrix/matrix_summary.json
data/output/out_c.json
data/output/out_overlimit.json
data/output/out_sales.json
data/output/out_whitelist.json
data/quote_log.db
data/tmp/pdf_generation_error_20250816T185042Z.txt
data/tmp/pdf_generation_error_20250816T185046Z.txt
docs/architecture.md
docs/ci/pipeline.md
docs/cli.md
docs/guide/cli.md
docs/guide/tests.md
docs/index.md
init_db.py
mkdocs.yml
modules/__init__.py
modules/apply_diff.py
modules/quotation.py
modules/quote_logger.py
modules/sales_notifier.py
mypy.ini
online_check_shadow_root.py
out/.gitkeep
out/quote.pdf
pyproject.toml
pytest.ini
quote.pdf
quote_pdf.pdf
repo_files_after_clean.txt
reports/.gitkeep
requirements.txt
scripts/__init__.py
scripts/ci_status.sh
scripts/cov_focus_modules.py
scripts/demo_offline.sh
scripts/housekeeping.sh
scripts/online_check.py
scripts/oss_snapshot.sh
scripts/run_pipeline.sh
scripts/setup_env.sh
share/git_files.txt
share/git_untracked.txt
share/tree_depth2.txt
share/tree_depth3.txt
share/tree_full.txt
site/.gitkeep
sitecustomize.py
src/action_handler.py
src/ai_rpa/actions.py
src/ai_rpa/file_classifier.py
src/ai_rpa/main.py
src/ai_rpa/nlp.py
src/ai_rpa/ocr.py
src/ai_rpa/scraper.py
src/ai_rpa/utils/config_loader.py
src/ai_rpa/utils/logger.py
src/classifier.py
src/email_processor.py
src/inference_classifier.py
src/patches/__init__.py
src/patches/handle_safe_patch.py
src/run_action_handler.py
src/send_with_attachment.py
src/smart_mail_agent/__init__.py
src/smart_mail_agent/__main__.py
src/smart_mail_agent/__version__.py
src/smart_mail_agent/actions/__init__.py
src/smart_mail_agent/actions/complaint.py
src/smart_mail_agent/actions/sales_inquiry.py
src/smart_mail_agent/cli/sma.py
src/smart_mail_agent/cli/sma_run.py
src/smart_mail_agent/cli/sma_spamcheck.py
src/smart_mail_agent/cli_spamcheck.py
src/smart_mail_agent/core/classifier.py
src/smart_mail_agent/core/policy_engine.py
src/smart_mail_agent/core/sma_types.py
src/smart_mail_agent/core/utils/.keep
src/smart_mail_agent/core/utils/__init__.py
src/smart_mail_agent/core/utils/jsonlog.py
src/smart_mail_agent/core/utils/logger.py
src/smart_mail_agent/core/utils/mailer.py
src/smart_mail_agent/email_processor.py
src/smart_mail_agent/features/__init__.py
src/smart_mail_agent/features/apply_diff.py
src/smart_mail_agent/features/leads_logger.py
src/smart_mail_agent/features/modules_legacy/__init__.py
src/smart_mail_agent/features/quote_logger.py
src/smart_mail_agent/features/sales/quotation.py
src/smart_mail_agent/features/sales_notifier.py
src/smart_mail_agent/features/support/support_ticket.py
src/smart_mail_agent/inference_classifier.py
src/smart_mail_agent/ingestion/email_processor.py
src/smart_mail_agent/ingestion/init_db.py
src/smart_mail_agent/ingestion/integrations/send_with_attachment.py
src/smart_mail_agent/observability/log_writer.py
src/smart_mail_agent/observability/sitecustomize.py
src/smart_mail_agent/observability/stats_collector.py
src/smart_mail_agent/observability/tracing.py
src/smart_mail_agent/patches/__init__.py
src/smart_mail_agent/patches/handle_router_patch.py
src/smart_mail_agent/patches/handle_safe_patch.py
src/smart_mail_agent/policy_engine.py
src/smart_mail_agent/routing/__init__.py
src/smart_mail_agent/routing/action_handler.py
src/smart_mail_agent/routing/run_action_handler.py
src/smart_mail_agent/sma_types.py
src/smart_mail_agent/smart_mail_agent/__init__.py
src/smart_mail_agent/smart_mail_agent/utils/__init__.py
src/smart_mail_agent/smart_mail_agent/utils/pdf_safe.py
src/smart_mail_agent/spam/.keep
src/smart_mail_agent/spam/__init__.py
src/smart_mail_agent/spam/feature_extractor.py
src/smart_mail_agent/spam/inference_classifier.py
src/smart_mail_agent/spam/ml_spam_classifier.py
src/smart_mail_agent/spam/offline_orchestrator.py
src/smart_mail_agent/spam/orchestrator_offline.py
src/smart_mail_agent/spam/pipeline.py
src/smart_mail_agent/spam/rule_filter.py
src/smart_mail_agent/spam/rules.py
src/smart_mail_agent/spam/spam_filter_orchestrator.py
src/smart_mail_agent/spam/spam_llm_filter.py
src/smart_mail_agent/spam/spam_rules.yaml
src/smart_mail_agent/trainers/train_bert_spam_classifier.py
src/smart_mail_agent/trainers/train_classifier.py
src/smart_mail_agent/utils/__init__.py
src/smart_mail_agent/utils/config.py
src/smart_mail_agent/utils/db_tools.py
src/smart_mail_agent/utils/env.py
src/smart_mail_agent/utils/errors.py
src/smart_mail_agent/utils/font_check.py
src/smart_mail_agent/utils/fonts.py
src/smart_mail_agent/utils/imap_folder_detector.py
src/smart_mail_agent/utils/imap_login.py
src/smart_mail_agent/utils/jsonlog.py
src/smart_mail_agent/utils/log_writer.py
src/smart_mail_agent/utils/logger.py
src/smart_mail_agent/utils/logging_setup.py
src/smart_mail_agent/utils/mailer.py
src/smart_mail_agent/utils/pdf_generator.py
src/smart_mail_agent/utils/pdf_safe.py
src/smart_mail_agent/utils/priority_evaluator.py
src/smart_mail_agent/utils/rag_reply.py
src/smart_mail_agent/utils/templater.py
src/smart_mail_agent/utils/tracing.py
src/smart_mail_agent/utils/validators.py
src/spam/__init__.py
src/spam/spam_filter_orchestrator.py
src/stats_collector.py
src/utils/__init__.py
src/utils/log_writer.py
src/utils/logger.py
src/utils/mailer.py
src/utils/pdf_safe.py
tests/.keep
tests/conftest.py
tests/contracts/conftest.py
tests/contracts/test_action_result_contracts.py
tests/e2e/conftest.py
tests/e2e/test_actions_matrix_ext.py
tests/e2e/test_cli_flags.py
tests/e2e/test_cli_scripts.py
tests/e2e/test_complaint_policy.py
tests/e2e/test_label_routing_offline.py
tests/e2e/test_new_intents.py
tests/e2e/test_offline_suite.py
tests/e2e/test_policy_expansion.py
tests/e2e/test_runner.py
tests/e2e/test_sales_and_complaint.py
tests/e2e/test_sales_inquiry_needs_summary.py
tests/e2e/test_send_quote_degrade.py
tests/e2e/test_spam_pipeline.py
tests/integration/test_email_end_to_end_offline.py
tests/integration/test_online_send_paths.py
tests/internal_smoke/test_import_all_internal.py
tests/online/test_smtp_send.py
tests/policy/test_attachment_risks_extra.py
tests/policy/test_attachment_risks_matrix.py
tests/portfolio/test_email_processor_utils.py
tests/portfolio/test_inference_classifier_fallback.py
tests/portfolio/test_log_writer.py
tests/portfolio/test_patches_router.py
tests/portfolio/test_pdf_safe.py
tests/portfolio/test_policy_engine_smoke.py
tests/portfolio/test_quotation_module.py
tests/portfolio/test_run_action_handler_cli_offline.py
tests/portfolio/test_send_with_attachment_shim.py
tests/portfolio/test_spam_cli_help.py
tests/portfolio/test_spam_orchestrator_smoke.py
tests/portfolio/test_spam_rules_scoring.py
tests/portfolio/test_support_ticket.py
tests/smoke/test_cli_help.py
tests/smoke/test_log_writer_import.py
tests/spam/test_offline_orchestrator_contracts.py
tests/spam/test_offline_orchestrator_e2e.py
tests/spam/test_offline_orchestrator_model_variants.py
tests/spam/test_offline_orchestrator_model_variants_extra.py
tests/spam/test_offline_orchestrator_paths.py
tests/spam/test_rule_model_tiebreak_offline.py
tests/spam/test_rules.py
tests/spam/test_rules_offline_behaviors.py
tests/test_action_handler.py
tests/test_apply_diff.py
tests/test_classifier.py
tests/test_cli_spamcheck.py
tests/test_init_db.py
tests/test_init_emails_log_db.py
tests/test_init_processed_mails_db.py
tests/test_init_tickets_db.py
tests/test_mailer.py
tests/test_mailer_online.py
tests/test_quotation.py
tests/test_quote_logger.py
tests/test_sales_notifier.py
tests/test_send_with_attachment.py
tests/test_spam_filter.py
tests/test_stats_collector.py
tests/unit/test_ai_rpa_min.py
tests/unit/test_classifier_rules_extra.py
tests/unit/test_classifier_shapes_and_rules.py
tests/unit/test_cli_orchestrator_offline.py
tests/unit/test_cli_sma_version.py
tests/unit/test_contracts.py
tests/unit/test_cov_anchor_modules.py
tests/unit/test_email_processor_order_extra.py
tests/unit/test_email_processor_smoke.py
tests/unit/test_handle_safe_patch_min.py
tests/unit/test_html_link_ratio_edges_new.py
tests/unit/test_html_link_ratio_more_edges.py
tests/unit/test_i18n_keywords_nfkc.py
tests/unit/test_i18n_nfkc_edges.py
tests/unit/test_inference_classifier_errors.py
tests/unit/test_log_writer_db_smoke.py
tests/unit/test_logger_utils_smoke.py
tests/unit/test_modules_smoke_imports.py
tests/unit/test_pdf_generator_smoke.py
tests/unit/test_pdf_safe_extra.py
tests/unit/test_pdf_safe_more_ascii.py
tests/unit/test_pdf_safe_security_more.py
tests/unit/test_policy_engine.py
tests/unit/test_policy_minimal.py
tests/unit/test_quotation_big_attachment_edges.py
tests/unit/test_quotation_branch_matrix.py
tests/unit/test_quotation_branches.py
tests/unit/test_quotation_branches_extra.py
tests/unit/test_quotation_cli.py
tests/unit/test_quotation_cli_only.py
tests/unit/test_quotation_core.py
tests/unit/test_quotation_cov_extra.py
tests/unit/test_quotation_cov_extra2.py
tests/unit/test_quotation_full_coverage.py
tests/unit/test_quotation_more_edges.py
tests/unit/test_quotation_needs_manual_more.py
tests/unit/test_quotation_pdf_paths.py
tests/unit/test_quotation_pdf_smoke.py
tests/unit/test_rules_conf_suffix_reasons.py
tests/unit/test_send_with_attachment_smoke.py
tests/unit/test_sma_types_normalize_extra.py
tests/unit/test_spam_pipeline_smoke.py
tests/unit/test_spam_rules_min.py
tests/unit/test_spam_stack.py
tests/unit/test_tasks_minimal.py
tests/unit/test_templater_smoke.py
tests/unit/test_utils_pdf_safe_top.py
tools/run_actions_matrix.py
tox.ini
